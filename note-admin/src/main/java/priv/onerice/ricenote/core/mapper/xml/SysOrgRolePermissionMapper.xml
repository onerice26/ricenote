<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="priv.onerice.ricenote.core.mapper.SysOrgRolePermissionMapper">

    <select id="getPermissionsByRoles" resultType="priv.onerice.ricenote.core.entity.SysPermission">
        SELECT sp.*
        FROM sys_org_role_permission orp,
        sys_org_permission op,
        sys_permission sp
        WHERE orp.permission_id = op.id
        AND op.permission_id = sp.id
        And sp.data_level = '0'
        And orp.role_id in
        <foreach collection="roles" index="index" item="i" open="(" separator="," close=")">
            #{i}
        </foreach>
    </select>
</mapper>
